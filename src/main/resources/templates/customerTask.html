<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{navbar}">
<head th:replace="navbar :: head">
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- DataTable -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css" />
    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link th:href="@{/css/apiKey.css}" rel="stylesheet" />
    <link th:href="@{/css/styleDataTable.css}" rel="stylesheet" />
</head>
<body>
    <div class="container my-4" layout:fragment="page-content">
        <div class="row">
            <h3>Customer</h3>
        </div>
        <a data-redirect-url="/crearCustomerTask"
           class="btn btn-primary col-sm-2 col-md-2 col-lg-2 col-xl-2 mb-3"
           onclick="getApiKey(this.getAttribute('data-redirect-url'));">Create Customer Task</a>
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <table id="datatable_users" class="table">
                <thead>
                <tr>
                    <th class="centered">Description</th>
                    <th class="centered">LimitDate</th>
                    <th class="centered">State</th>
                    <th class="centered">Customer</th>
                    <th class="centered">Options</th>
                </tr>
                </thead>
                <tbody id="tableBody_customers_task">
                <tr th:each="customerTask : ${lstCustomResponse}">
                    <td class="centered" th:text="${customerTask.description}"></td>
                    <td class="centered" th:text="${customerTask.limitDate}"></td>
                    <td class="centered" th:text="${customerTask.state}"></td>
                    <td class="centered" th:text="${customerTask.customer.name}"></td>
                    <td class="centered">
                        <i th:attr="data-redirect-url='/crearCustomerTask?customerTaskId=' + ${customerTask.id}"
                           class="fa-solid fa-pencil"
                           style="color: blue; cursor: pointer;"
                           onclick="getApiKey(this.getAttribute('data-redirect-url'));">
                        </i>
                        <i th:attr="data-redirect-url='/deleteCustomerTask?customerTaskId=' + ${customerTask.id}"
                           class="fa-solid fa-trash-can"
                           style="color: red; cursor: pointer;"
                           onclick="getApiKey(this.getAttribute('data-redirect-url'));">
                        </i>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- DataTable -->
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
<!--<script th:src="@{/js/apiKeyInterceptor.js}"></script>-->
<script th:src="@{/js/initDataTableCustomer.js}"></script>
<script th:src="@{/js/apiKeyInterceptor.js}"></script>

</body>
</html>